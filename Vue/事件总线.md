# 中央事件总线

## main.js

```js
Vue.prototype.$bus = new Vue()
```

## 兄弟组件A.vue

```js
  created () {
    this.$bus.$emit('hello', 'world')
  }
```

## 兄弟组件B.vue

```js
  created () {
    this.$bus.$on('hello', data => {
      console.log(data)
    })
  }
```



## 说明

### 关于生命周期

> 界面中引用各个兄弟组件，他们会在同一界面一起加载，当界面离开时会一起销毁。
>
> > 因为离开界面会销毁，所以可以各界面重名。

### 关于为什么只能是兄弟组件

> 必须在同一界面同时引用的组件才能互相监听，因为离开界面生命周期会执行销毁，所以不能用其他界面。
>
> > 这里的兄弟组件不是同一目录下组件，而是当前界面同时引用的组件，组件在界面中按顺序并列（兄弟）排放。

### 关于监听事件

> `this.$bus.$on`会一直监听传递来的值，类似于`where (true)`，直到生命周期结束销毁。